 ! BEGIN
! Command: "show current-config all"
! Generated by:
!   Username: "admin"
!   Date: "2016-11-30T12:52:21.093Z"
!   Version: "7.2.1.616"
!   dbVersion: "111"
!   Unlocked Features:
!   Appliance: "DavidHackathon"

! pragma:interpreter:relaxed-db-restore

home
enable
configure

! Create All: "Message Vpns"
create message-vpn "hackathon"
  exit

! Configure Ethernet Interfaces: 

! Configure Lag Interfaces: 

! Configure SolOsPhy Interfaces: 
! pragma:interpreter:ignore-already-exists
create interface "intf0"
! pragma:interpreter:no-ignore-already-exists
home
enable
configure
interface "intf0"
  os-physical-interface "eth0"
  no shutdown
  exit

! Configure ip vrf: "management"
ip
  vrf "management"
    dhcp
! pragma:interpreter:ignore-already-exists
    create interface "intf0:1" static
! pragma:interpreter:no-ignore-already-exists
home
enable
configure
ip
  vrf "management"
    interface "intf0:1" static
      shutdown
      no ip-address
      no shutdown
      exit
    exit
  exit

! Configure ip vrf: "msg-backbone"
ip
  vrf "msg-backbone"
    no dhcp
    exit
  exit

! Configure SEMP Service: 
service semp shutdown plain-text
service semp listen-port 8080
no service semp shutdown plain-text
service semp shutdown ssl
service semp listen-port 943 ssl
no service semp shutdown ssl

! Configure SMF Service: 
service smf event connections thresholds set-percentage 80 clear-percentage 60
service smf shutdown
service smf listen-port "55555"
service smf listen-port "55003"  "compressed"
service smf listen-port "55556"  "routing"
service smf listen-port "55443"  "ssl"
no service smf shutdown

! Configure Matelink Service: 
service mate-link shutdown
service mate-link listen-port "8741"

! Configure SSL Service: 
service ssl event connections thresholds set-percentage 80 clear-percentage 60

! Configure WEB Service
service web-transport shutdown
service web-transport listen-port 80
no service web-transport web-url-suffix
service web-transport listen-port "443"  "ssl"
no service web-transport shutdown

! Configure REST Service: 
service rest event outgoing connections thresholds set-percentage 80 clear-percentage 60
no service rest incoming shutdown
no service rest outgoing shutdown

! Configure MQTT Service: 
no service mqtt shutdown

! Configure DNS: 
dns
  no dhcp
  name-server "172.31.0.2" discovered
  polled-domain-name "www.solacesystems.com"
  exit

! Configure Hostname
hostname "ip-172-31-28-29" defer

! Configure Router Name
router-name "DavidHackathon" defer

! Configure Routing
routing
  interface "intf0"
  cspf
    create neighbor "Vidya-VMR-Sydney" connect-via 13.54.186.240:55003 compressed-data
      link-cost 100
      tcp initial-cwnd 10
      tcp keepalive count 5
      tcp keepalive idle 3
      tcp keepalive interval 1
      tcp max-wnd 1024
      tcp mss 1460
      exit
    create neighbor "hackathon-americas-vmr" connect-via 34.193.188.18:55003 compressed-data
      link-cost 100
      tcp initial-cwnd 10
      tcp keepalive count 5
      tcp keepalive idle 3
      tcp keepalive interval 1
      tcp max-wnd 1024
      tcp mss 1460
      exit
    create neighbor "hackathon-singapore-vmr" connect-via 52.77.102.138:55003 compressed-data
      link-cost 100
      tcp initial-cwnd 10
      tcp keepalive count 5
      tcp keepalive idle 3
      tcp keepalive interval 1
      tcp max-wnd 1024
      tcp mss 1460
      exit
    create neighbor "hkgsolaa01" connect-via 52.78.245.158:55003 compressed-data
      link-cost 100
      tcp initial-cwnd 10
      tcp keepalive count 5
      tcp keepalive idle 3
      tcp keepalive interval 1
      tcp max-wnd 1024
      tcp mss 1460
      exit
    queue max-depth 20000
    queue min-msg-burst 255
    exit
  no shutdown
  exit

! Configure Redundancy
redundancy node-type "message-routing-node"
no redundancy auto-revert
redundancy active-standby-role primary
no redundancy mate-link connect-via
redundancy mate-link hello interval 1000
redundancy mate-link hello timeout 3000
redundancy
  group
    exit
  exit
redundancy shutdown
no redundancy release-activity

! Create hardware
!   Disk
!   Message Spool
hardware message-spool event egress-flows thresholds set-percentage 80 clear-percentage 60
hardware message-spool event endpoints thresholds set-percentage 80 clear-percentage 60
hardware message-spool event ingress-flows thresholds set-percentage 80 clear-percentage 60
hardware message-spool event spool-usage thresholds set-percentage 80 clear-percentage 60
hardware message-spool event transacted-sessions thresholds set-percentage 80 clear-percentage 60
hardware message-spool event transactions thresholds set-percentage 80 clear-percentage 60
hardware message-spool event cache-usage thresholds set-percentage 80 clear-percentage 60
hardware message-spool event transacted-session-resources thresholds set-percentage 80 clear-percentage 60
hardware message-spool event disk-usage thresholds set-percentage 80 clear-percentage 60
hardware message-spool event spool-files thresholds set-percentage 80 clear-percentage 60
hardware message-spool event message-count thresholds set-percentage 80 clear-percentage 60
hardware message-spool event delivered-unacked thresholds set-percentage 80 clear-percentage 60
hardware message-spool shutdown
hardware message-spool spool-sync mode "none"
hardware message-spool spool-sync mirrored message-ack-timeout 1000
hardware message-spool spool-sync mirrored spool-file-ack-timeout 1000
hardware message-spool transaction replication-compatibility-mode "legacy"
hardware message-spool max-cache-usage 10
hardware message-spool max-spool-usage 1500
no hardware message-spool shutdown
!   Power Redundancy
!   Topic Routing

! Configure Replication
no replication interface
replication mate connect-port 55555
replication mate connect-port 55443 ssl
no replication mate virtual-router-name
replication ssl trusted-common-name "empty"
replication ssl cipher-suite "default"
replication config-sync bridge shutdown
replication config-sync bridge authentication auth-scheme "Basic"
no replication config-sync bridge compressed-data
replication config-sync bridge message-spool window-size 65535
replication config-sync bridge retry-delay 3
no replication config-sync bridge ssl
replication config-sync bridge ssl-server-certificate-validation enforce-trusted-common-name
replication config-sync bridge ssl-server-certificate-validation max-certificate-chain-depth 3
replication config-sync bridge ssl-server-certificate-validation validate-certificate-date
no replication config-sync bridge shutdown

! Configure Clock: 
clock timezone "UTC"

! Configure Memory Event
memory-event nab-buffer-load-factor thresholds set-percentage 80 clear-percentage 60
no memory-event physical-memory thresholds
memory-event subscriptions-memory thresholds set-value 80 clear-value 60

! Configure Service: 
service event connections thresholds set-percentage 80 clear-percentage 60
service msg-backbone shutdown
service msg-backbone vrf "management"
no service msg-backbone shutdown

! Configure NTP Server: 

! Configure Schedule: 
no schedule backup

! Create Compression: 
compression mode optimize-for-size

! Configure SNMP: 

! Create console: 
console timeout 5
no console login-banner

! Create logging: 
logging command "CLI" mode "config"
logging command "semp-mgmt" mode "config"
logging command "semp-msgbus" mode "config"
no logging event system-tag
no logging event publish-system
no logging millisecond-timestamp

! Configure SSL: 
ssl tls-session-timeout 86400

! Configure Config Sync: 
config-sync authentication client-certificate max-certificate-chain-depth 3
config-sync authentication client-certificate validate-certificate-date
config-sync client-profile tcp initial-cwnd 2
config-sync client-profile tcp keepalive count 5
config-sync client-profile tcp keepalive idle 3
config-sync client-profile tcp keepalive interval 1
config-sync client-profile tcp max-wnd 256
config-sync client-profile tcp mss 1460
config-sync shutdown

! Create Usernames: 
! pragma:interpreter:ignore-already-exists
create username "admin" aes-password UBWDUzkiDfpkPpga2o6S/yT3gwrfPEdl2bpg7+ppXKjnFM6MgOqTkuW1xJK76tUI cli
! pragma:interpreter:no-ignore-already-exists
home
enable
configure
username "admin"
  change-aes-password "UBWDUzkiDfpkPpga2o6S/yT3gwrfPEdl2bpg7+ppXKjnFM6MgOqTkuW1xJK76tUI"
  global-access-level "admin"
  exit
! pragma:interpreter:ignore-already-exists
create username "ro" aes-password KjbHe11eHBx4j8AsumwbqyOJgDb7hHW5RHEAl6cr6slboKimMiK+V0ehAC1hrbdU cli
! pragma:interpreter:no-ignore-already-exists
home
enable
configure
username "ro"
  global-access-level "read-only"
  message-vpn
    default-access-level "read-only"
    exit
  exit
! pragma:interpreter:ignore-already-exists
create username "FTP" aes-password DJjpbfQeAQagdLmRzzD9NHPVbqajh8QgOyFIrhx7URquW0f1pWwtGklC8+HuJFxr file-transfer
! pragma:interpreter:no-ignore-already-exists
home
enable
configure
username "FTP"
  exit

! Create LDAP Profile: "default"
authentication
  ldap-profile "default"
    admin dn "" aes-password "ksZ37RJJZqiwWftkJqgdUUTkBE6zMP+arO0EyCnpg+tsORn6nDl73fZbvVIgsNC5bDEnOHbW6LSdAERa6faZ3FWIbfDKCw5Y6R6PDUCOo39SxVLIsuZ+iEaiuVkJ00Si8E2QWWqW3isQO5dIoyrPYpWUzG63sUZJ7QqSrzcQuyk="
    no allow-unauthenticated-authentication
    no ldap-server index "1"
    no ldap-server index "2"
    no ldap-server index "3"
    search base-dn ""
    search deref "always"
    search filter "(cn=$CLIENT_USERNAME)"
    search follow-continuation-references
    search scope "subtree"
    search timeout 5
    group-membership-secondary-search base-dn ""
    group-membership-secondary-search deref "always"
    group-membership-secondary-search filter-attribute-from-primary-search "dn"
    group-membership-secondary-search filter "(member=$ATTRIBUTE_VALUE_FROM_PRIMARY_SEARCH)"
    group-membership-secondary-search follow-continuation-references
    group-membership-secondary-search scope "subtree"
    group-membership-secondary-search timeout 5
    group-membership-secondary-search shutdown
    shutdown
    no tls
    exit
  exit

! Create Radius Profile: "default"
authentication
  radius-profile "default"
    no radius-server index "1"
    no radius-server index "2"
    no radius-server index "3"
    retransmit 3
    timeout 5
    shutdown
    exit
  exit

! Create Authentication: "miscellaneous"
authentication
  replace-duplicate-client-connections
  user-class cli
    access-level
      default
        global-access-level "read-only"
        message-vpn
          default-access-level "none"
          exit
        exit
      ldap
        no group-membership-attribute-name
        exit
      exit
    auth-type internal
    no radius-domain
    exit
  allow-direct-shell-login "support"
  exit

! Create Message Vpn: "default"
message-vpn "default"
  authentication
    user-class "client"
      basic auth-type none
      no basic radius-domain
      no basic shutdown
      client-certificate validate-certificate-date
      no client-certificate allow-api-provided-username
      client-certificate max-certificate-chain-depth 3
      client-certificate shutdown
      exit
    exit
  authorization
    user-class "client"
      ldap group-membership-attribute-name "memberOf"
      authorization-type internal
      exit
    exit
  bridging ssl server-certificate-validation enforce-trusted-common-name
  bridging ssl server-certificate-validation max-certificate-chain-depth 3
  bridging ssl server-certificate-validation validate-certificate-date
  distributed-cache-management
  export-policy export-subscriptions
  no management-message-vpn
  max-connections 1000
  max-subscriptions 500000
  no semp-over-msgbus shutdown
  no semp-over-msgbus show-cmds shutdown
  no semp-over-msgbus admin-cmds shutdown
  no semp-over-msgbus admin-cmds distributed-cache-cmds shutdown
  no semp-over-msgbus admin-cmds client-cmds shutdown
  service smf max-connections 1000
  no service smf plain-text shutdown
  no service smf ssl shutdown
  service web-transport max-connections 1000
  no service web-transport plain-text shutdown
  no service web-transport ssl shutdown
  service rest incoming max-connections 1000
  service rest incoming listen-port 9000
  no service rest incoming plain-text shutdown
  service rest incoming listen-port 9443 ssl
  no service rest incoming ssl shutdown
  service rest outgoing max-connections 1000
  service mqtt max-connections 1000
  service mqtt listen-port 1883
  no service mqtt plain-text shutdown
  service mqtt listen-port 8883 ssl
  no service mqtt ssl shutdown
  service mqtt listen-port 8000 web
  no service mqtt websocket shutdown
  service mqtt listen-port 8443 ssl web
  no service mqtt websocket-secure shutdown
  event connections thresholds set-percentage 80 clear-percentage 60
  event service smf connections thresholds set-percentage 80 clear-percentage 60
  event service web-transport connections thresholds set-percentage 80 clear-percentage 60
  event service rest incoming connections thresholds set-percentage 80 clear-percentage 60
  event service mqtt connections thresholds set-percentage 80 clear-percentage 60
  event egress-message-rate thresholds set-value 4000000 clear-value 3000000
  event ingress-message-rate thresholds set-value 4000000 clear-value 3000000
  event large-message-threshold 1024
  no event log-tag
  no event publish-client
  no event publish-message-vpn
  event publish-topic-format smf
  no event publish-subscription
  event subscriptions thresholds set-percentage 80 clear-percentage 60
  replication
    ack-propagation interval messages 20
    no ack-propagation shutdown
    transaction-replication-mode "async"
    bridge authentication auth-scheme "Basic"
    no bridge authentication basic client-username
    no bridge compressed-data
    no bridge ssl
    bridge message-spool window-size 255
    bridge retry-delay 3
    bridge unidirectional client-profile "#client-profile"
    queue max-spool-usage 1500
    queue reject-msg-to-sender-on-discard
    exit
  rest
    exit
  ssl
    no allow-downgrade-to-plain-text
    exit
  exit

! Create MQTT Sessions: 
message-vpn "default"
  mqtt
    exit
  exit

! Create Message Spool: "default"
message-spool message-vpn "default"
  max-spool-usage 1500
  max-transacted-sessions 1000
  max-transactions 5000
  max-endpoints 1000
  max-egress-flows 1000
  max-ingress-flows 1000
  event spool-usage thresholds set-percentage 80 clear-percentage 60
  event transacted-sessions thresholds set-percentage 80 clear-percentage 60
  event transactions thresholds set-percentage 80 clear-percentage 60
  event endpoints thresholds set-percentage 80 clear-percentage 60
  event egress-flows thresholds set-percentage 80 clear-percentage 60
  event ingress-flows thresholds set-percentage 80 clear-percentage 60
  exit

! Create Client Profile: "default"
client-profile "default" message-vpn "default"
  allow-bridge-connections
  service smf max-connections-per-client-username 1000
  service web-transport inactive-timeout 30
  service web-transport max-web-payload 1000000
  service web-transport max-connections-per-client-username 1000
  max-connections-per-client-username 1000
  max-subscriptions 500000
  message-spool allow-guaranteed-endpoint-create
  message-spool allow-guaranteed-message-receive
  message-spool allow-guaranteed-message-send
  message-spool allow-transacted-sessions
  message-spool allow-cut-through-forwarding
  message-spool max-transacted-sessions 10
  message-spool max-transactions 5000
  message-spool max-endpoints-per-client-username 1000
  message-spool max-egress-flows 1000
  message-spool max-ingress-flows 1000
  no message-spool api-queue-management copy-from-on-create
  no message-spool api-topic-endpoint-management copy-from-on-create
  queue "G-1"
    max-depth 20000
    min-msg-burst 255
    exit
  queue "D-1"
    max-depth 20000
    min-msg-burst 4
    exit
  queue "D-2"
    max-depth 20000
    min-msg-burst 4
    exit
  queue "D-3"
    max-depth 20000
    min-msg-burst 4
    exit
  queue "C-1"
    max-depth 20000
    min-msg-burst 4
    exit
  tcp initial-cwnd 2
  tcp keepalive count 5
  tcp keepalive idle 3
  tcp keepalive interval 1
  tcp max-wnd 256
  tcp mss 1460
  event connections-per-client-username thresholds set-percentage 80 clear-percentage 60
  event service smf connections-per-client-username thresholds set-percentage 80 clear-percentage 60
  event service web-transport connections-per-client-username thresholds set-percentage 80 clear-percentage 60
  event subscriptions thresholds set-percentage 80 clear-percentage 60
  event client-provisioned-endpoint-spool-usage thresholds set-percentage 80 clear-percentage 60
  event transacted-sessions thresholds set-percentage 80 clear-percentage 60
  event transactions thresholds set-percentage 80 clear-percentage 60
  event endpoints-per-client-username thresholds set-percentage 80 clear-percentage 60
  event egress-flows thresholds set-percentage 80 clear-percentage 60
  event ingress-flows thresholds set-percentage 80 clear-percentage 60
  no replication allow-clients-when-standby
  exit

! Create ACL Profile: "default"
acl-profile "default" message-vpn "default"
  client-connect default-action "allow"
  publish-topic default-action "allow"
  subscribe-topic default-action "allow"
  exit

! Create Client Username: "default"
client-username "default" message-vpn "default"
  acl-profile "default"
  client-profile "default"
  no guaranteed-endpoint-permission-override
  aes-password "ksZ37RJJZqiwWftkJqgdUUTkBE6zMP+arO0EyCnpg+tsORn6nDl73fZbvVIgsNC5"
  no subscription-manager
  no shutdown
  exit

! Create JNDI: "default"
jndi message-vpn "default"
! pragma:interpreter:ignore-already-exists
  create connection-factory "/jms/cf/default"
    property-list "messaging-properties"
      property "default-delivery-mode" "persistent"
      property "text-msg-xml-payload" "true"
      property "default-dmq-eligible" "false"
      property "default-eliding-eligible" "false"
      property "xa" "true"
      property "jmsx-user-id-enabled" "false"
      exit
    property-list "transport-properties"
      property "connect-timeout" "30000"
      property "read-timeout" "10000"
      property "reconnect-retries" "3"
      property "reconnect-retry-wait" "3000"
      property "keep-alive-enabled" "true"
      property "keep-alive-interval" "3000"
      property "keep-alive-count-max" "3"
      property "send-buffer" "65536"
      property "receive-buffer" "65536"
      property "tcp-no-delay" "true"
      property "direct-transport" "false"
      property "compression-level" "-1"
      property "port" "-1"
      property "optimize-direct" "false"
      property "msg-callback-on-io-thread" "false"
      property "connect-retries-per-host" "0"
      property "connect-retries" "0"
      exit
    property-list "ad-properties"
      property "send-ad-window-size" "255"
      property "send-ack-timer" "2000"
      property "send-max-resends" "30"
      property "receive-ad-window-size" "18"
      property "receive-ack-timer" "1000"
      property "receive-ack-threshold" "60"
      exit
    property-list "deliver-to-one-properties"
      property "subscriber-local-priority" "1"
      property "subscriber-network-priority" "1"
      property "deliver-to-one" "false"
      property "deliver-to-one-override" "true"
      exit
    property-list "dynamic-endpoint-properties"
      property "dynamic-durables" "false"
      property "respect-ttl" "true"
      exit
    property-list "client-properties"
      no property client-id
      no property client-description
      exit
    exit
! pragma:interpreter:no-ignore-already-exists
  no shutdown
  exit

! Enable Message Vpn: "default"
message-vpn "default"
  no shutdown
  replication
    state "standby"
    shutdown
    exit
  exit

! Just Create Message Vpn: "hackathon"
! pragma:interpreter:ignore-already-exists
create message-vpn "hackathon"
! pragma:interpreter:no-ignore-already-exists
  exit

! Just Create Client Profile: "hackathon"
! pragma:interpreter:ignore-already-exists
create client-profile "hackathon" message-vpn "hackathon"
! pragma:interpreter:no-ignore-already-exists
  exit

! Just Create ACL Profile: "hackathon"
! pragma:interpreter:ignore-already-exists
create acl-profile "hackathon" message-vpn "hackathon"
! pragma:interpreter:no-ignore-already-exists
  exit

! Create Message Vpn: "hackathon"
message-vpn "hackathon"
  authentication
    user-class "client"
      basic auth-type none
      no basic radius-domain
      no basic shutdown
      client-certificate validate-certificate-date
      no client-certificate allow-api-provided-username
      client-certificate max-certificate-chain-depth 3
      client-certificate shutdown
      exit
    exit
  authorization
    user-class "client"
      ldap group-membership-attribute-name "memberOf"
      authorization-type internal
      exit
    exit
  bridging ssl server-certificate-validation enforce-trusted-common-name
  bridging ssl server-certificate-validation max-certificate-chain-depth 3
  bridging ssl server-certificate-validation validate-certificate-date
  distributed-cache-management
  export-policy export-subscriptions
  no management-message-vpn
  max-connections 1000
  max-subscriptions 500000
  no semp-over-msgbus shutdown
  semp-over-msgbus show-cmds shutdown
  semp-over-msgbus admin-cmds shutdown
  semp-over-msgbus admin-cmds distributed-cache-cmds shutdown
  semp-over-msgbus admin-cmds client-cmds shutdown
  service smf max-connections 1000
  no service smf plain-text shutdown
  no service smf ssl shutdown
  service web-transport max-connections 1000
  no service web-transport plain-text shutdown
  no service web-transport ssl shutdown
  service rest incoming max-connections 1000
  no service rest incoming listen-port
  service rest incoming plain-text shutdown
  no service rest incoming listen-port ssl
  service rest incoming ssl shutdown
  service rest outgoing max-connections 1000
  service mqtt max-connections 1000
  no service mqtt listen-port
  service mqtt plain-text shutdown
  no service mqtt listen-port ssl
  service mqtt ssl shutdown
  no service mqtt listen-port web
  service mqtt websocket shutdown
  no service mqtt listen-port ssl web
  service mqtt websocket-secure shutdown
  event connections thresholds set-percentage 80 clear-percentage 60
  event service smf connections thresholds set-percentage 80 clear-percentage 60
  event service web-transport connections thresholds set-percentage 80 clear-percentage 60
  event service rest incoming connections thresholds set-percentage 80 clear-percentage 60
  event service mqtt connections thresholds set-percentage 80 clear-percentage 60
  event egress-message-rate thresholds set-value 4000000 clear-value 3000000
  event ingress-message-rate thresholds set-value 4000000 clear-value 3000000
  event large-message-threshold 1024
  no event log-tag
  no event publish-client
  no event publish-message-vpn
  event publish-topic-format smf
  no event publish-subscription
  event subscriptions thresholds set-percentage 80 clear-percentage 60
  replication
    ack-propagation interval messages 20
    no ack-propagation shutdown
    transaction-replication-mode "async"
    bridge authentication auth-scheme "Basic"
    no bridge authentication basic client-username
    no bridge compressed-data
    no bridge ssl
    bridge message-spool window-size 255
    bridge retry-delay 3
    bridge unidirectional client-profile "#client-profile"
    queue max-spool-usage 60000
    queue reject-msg-to-sender-on-discard
    exit
  rest
    exit
  ssl
    no allow-downgrade-to-plain-text
    exit
  exit

! Create MQTT Sessions: 
message-vpn "hackathon"
  mqtt
    exit
  exit

! Create Message Spool: "hackathon"
message-spool message-vpn "hackathon"
  max-spool-usage 1000
  max-transacted-sessions 1000
  max-transactions 5000
  max-endpoints 1000
  max-egress-flows 1000
  max-ingress-flows 1000
  event spool-usage thresholds set-percentage 80 clear-percentage 60
  event transacted-sessions thresholds set-percentage 80 clear-percentage 60
  event transactions thresholds set-percentage 80 clear-percentage 60
  event endpoints thresholds set-percentage 80 clear-percentage 60
  event egress-flows thresholds set-percentage 80 clear-percentage 60
  event ingress-flows thresholds set-percentage 80 clear-percentage 60
  exit

! Create Client Profile: "default"
client-profile "default" message-vpn "hackathon"
  no allow-bridge-connections
  service smf max-connections-per-client-username 1000
  service web-transport inactive-timeout 30
  service web-transport max-web-payload 1000000
  service web-transport max-connections-per-client-username 1000
  max-connections-per-client-username 1000
  max-subscriptions 500000
  no message-spool allow-guaranteed-endpoint-create
  no message-spool allow-guaranteed-message-receive
  no message-spool allow-guaranteed-message-send
  no message-spool allow-transacted-sessions
  no message-spool allow-cut-through-forwarding
  message-spool max-transacted-sessions 10
  message-spool max-transactions 5000
  message-spool max-endpoints-per-client-username 1000
  message-spool max-egress-flows 1000
  message-spool max-ingress-flows 1000
  no message-spool api-queue-management copy-from-on-create
  no message-spool api-topic-endpoint-management copy-from-on-create
  queue "G-1"
    max-depth 20000
    min-msg-burst 255
    exit
  queue "D-1"
    max-depth 20000
    min-msg-burst 4
    exit
  queue "D-2"
    max-depth 20000
    min-msg-burst 4
    exit
  queue "D-3"
    max-depth 20000
    min-msg-burst 4
    exit
  queue "C-1"
    max-depth 20000
    min-msg-burst 4
    exit
  tcp initial-cwnd 2
  tcp keepalive count 5
  tcp keepalive idle 3
  tcp keepalive interval 1
  tcp max-wnd 256
  tcp mss 1460
  event connections-per-client-username thresholds set-percentage 80 clear-percentage 60
  event service smf connections-per-client-username thresholds set-percentage 80 clear-percentage 60
  event service web-transport connections-per-client-username thresholds set-percentage 80 clear-percentage 60
  event subscriptions thresholds set-percentage 80 clear-percentage 60
  event client-provisioned-endpoint-spool-usage thresholds set-percentage 80 clear-percentage 60
  event transacted-sessions thresholds set-percentage 80 clear-percentage 60
  event transactions thresholds set-percentage 80 clear-percentage 60
  event endpoints-per-client-username thresholds set-percentage 80 clear-percentage 60
  event egress-flows thresholds set-percentage 80 clear-percentage 60
  event ingress-flows thresholds set-percentage 80 clear-percentage 60
  no replication allow-clients-when-standby
  exit

! Create Client Profile: "hackathon"
client-profile "hackathon" message-vpn "hackathon"
  no allow-bridge-connections
  service smf max-connections-per-client-username 1000
  service web-transport inactive-timeout 30
  service web-transport max-web-payload 1000000
  service web-transport max-connections-per-client-username 1000
  max-connections-per-client-username 1000
  max-subscriptions 500000
  message-spool allow-guaranteed-endpoint-create
  message-spool allow-guaranteed-message-receive
  message-spool allow-guaranteed-message-send
  message-spool allow-transacted-sessions
  message-spool allow-cut-through-forwarding
  message-spool max-transacted-sessions 10
  message-spool max-transactions 5000
  message-spool max-endpoints-per-client-username 1000
  message-spool max-egress-flows 1000
  message-spool max-ingress-flows 1000
  no message-spool api-queue-management copy-from-on-create
  no message-spool api-topic-endpoint-management copy-from-on-create
  queue "G-1"
    max-depth 20000
    min-msg-burst 255
    exit
  queue "D-1"
    max-depth 20000
    min-msg-burst 4
    exit
  queue "D-2"
    max-depth 20000
    min-msg-burst 4
    exit
  queue "D-3"
    max-depth 20000
    min-msg-burst 4
    exit
  queue "C-1"
    max-depth 20000
    min-msg-burst 4
    exit
  tcp initial-cwnd 2
  tcp keepalive count 5
  tcp keepalive idle 3
  tcp keepalive interval 1
  tcp max-wnd 256
  tcp mss 1460
  event connections-per-client-username thresholds set-percentage 80 clear-percentage 60
  event service smf connections-per-client-username thresholds set-percentage 80 clear-percentage 60
  event service web-transport connections-per-client-username thresholds set-percentage 80 clear-percentage 60
  event subscriptions thresholds set-percentage 80 clear-percentage 60
  event client-provisioned-endpoint-spool-usage thresholds set-percentage 80 clear-percentage 60
  event transacted-sessions thresholds set-percentage 80 clear-percentage 60
  event transactions thresholds set-percentage 80 clear-percentage 60
  event endpoints-per-client-username thresholds set-percentage 80 clear-percentage 60
  event egress-flows thresholds set-percentage 80 clear-percentage 60
  event ingress-flows thresholds set-percentage 80 clear-percentage 60
  no replication allow-clients-when-standby
  exit

! Create ACL Profile: "default"
acl-profile "default" message-vpn "hackathon"
  client-connect default-action "allow"
  publish-topic default-action "allow"
  subscribe-topic default-action "allow"
  exit

! Create ACL Profile: "hackathon"
acl-profile "hackathon" message-vpn "hackathon"
  client-connect default-action "allow"
  publish-topic default-action "allow"
  subscribe-topic default-action "allow"
  exit

! Create Client Username: "default"
client-username "default" message-vpn "hackathon"
  acl-profile "default"
  client-profile "default"
  no guaranteed-endpoint-permission-override
  aes-password "ksZ37RJJZqiwWftkJqgdUUTkBE6zMP+arO0EyCnpg+tsORn6nDl73fZbvVIgsNC5"
  no subscription-manager
  shutdown
  exit

! Create Client Username: "hackathon"
create client-username "hackathon" message-vpn "hackathon"
  acl-profile "hackathon"
  client-profile "hackathon"
  no guaranteed-endpoint-permission-override
  aes-password "ksZ37RJJZqiwWftkJqgdUUTkBE6zMP+arO0EyCnpg+tsORn6nDl73fZbvVIgsNC5"
  no subscription-manager
  no shutdown
  exit

! Create JNDI: "hackathon"
jndi message-vpn "hackathon"
  shutdown
  exit

! Enable Message Vpn: "hackathon"
message-vpn "hackathon"
  no shutdown
  replication
    state "standby"
    shutdown
    exit
  exit

! END
